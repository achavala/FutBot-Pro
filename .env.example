# =============================================================================
# FutBot Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual API keys
# DO NOT commit .env to git (already in .gitignore)

# =============================================================================
# DATA PROVIDERS
# =============================================================================

# Polygon.io - Primary data provider for minute bars
# Sign up: https://polygon.io/
# Free tier: 5 API calls/minute, delayed data
# Starter tier ($29/mo): Real-time data, unlimited calls
POLYGON_API_KEY=your_polygon_api_key_here

# Finnhub - News sentiment and alternative data
# Sign up: https://finnhub.io/
# Free tier: 60 API calls/minute
FINNHUB_API_KEY=your_finnhub_api_key_here

# Alpha Vantage - Backup data provider (optional)
# Sign up: https://www.alphavantage.co/
# Free tier: 5 API calls/minute, 500 calls/day
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key_here

# =============================================================================
# BROKER INTEGRATION
# =============================================================================

# Alpaca - Recommended for US stocks (commission-free)
# Sign up: https://alpaca.markets/
# Paper trading: https://app.alpaca.markets/paper/dashboard/overview
ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_SECRET_KEY=your_alpaca_secret_key_here
ALPACA_BASE_URL=https://paper-api.alpaca.markets  # Use paper trading URL
# For live trading, use: https://api.alpaca.markets

# Interactive Brokers - Alternative broker (optional)
# Requires IB Gateway or TWS running
# Docs: https://www.interactivebrokers.com/en/index.php?f=5041
IB_HOST=127.0.0.1
IB_PORT=7497  # 7497 for paper, 7496 for live
IB_CLIENT_ID=1
IB_ACCOUNT_ID=your_ib_account_id_here

# =============================================================================
# TRADING CONFIGURATION
# =============================================================================

# Symbol to trade
TRADING_SYMBOL=QQQ

# Initial capital (for paper trading)
INITIAL_CAPITAL=100000.0

# Trading hours (UTC)
# Market hours: 9:30 AM - 4:00 PM ET = 14:30 - 21:00 UTC
TRADING_START_TIME=14:30
TRADING_END_TIME=21:00

# Bar interval (in seconds)
BAR_INTERVAL=60  # 1-minute bars

# Mode: "paper" or "live"
TRADING_MODE=paper

# =============================================================================
# RISK MANAGEMENT
# =============================================================================

# Maximum daily loss percentage
MAX_DAILY_LOSS_PCT=0.02  # 2%

# Maximum loss streak before halting
MAX_LOSS_STREAK=5

# Maximum position size as percentage of capital
MAX_POSITION_SIZE_PCT=0.10  # 10%

# Minimum confidence threshold for trades
MIN_CONFIDENCE_THRESHOLD=0.4

# CVaR parameters
CVAR_WINDOW=20
CVAR_PERCENTILE=0.05  # 5th percentile

# =============================================================================
# POLICY ADAPTATION
# =============================================================================

# Enable adaptive weight evolution
ENABLE_ADAPTATION=true

# Adaptation frequency (update weights every N bars)
ADAPTATION_FREQUENCY=10

# Freeze weights (for testing static configurations)
FREEZE_ALL_WEIGHTS=false
FREEZE_AGENT_WEIGHTS=false
FREEZE_REGIME_WEIGHTS=false
FREEZE_VOLATILITY_WEIGHTS=false

# =============================================================================
# EXECUTION PARAMETERS
# =============================================================================

# Slippage modeling (basis points)
SLIPPAGE_BPS=2.0

# Slippage as percentage of bar range
SLIPPAGE_PCT_OF_RANGE=0.1

# Commission per share (set to 0 for Alpaca)
COMMISSION_PER_SHARE=0.0

# Minimum tick size
MIN_TICK_SIZE=0.01

# =============================================================================
# API SERVER
# =============================================================================

# FastAPI server configuration
API_HOST=0.0.0.0
API_PORT=8000

# Enable CORS (for web frontend)
ENABLE_CORS=true

# Allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# API authentication (optional, recommended for production)
API_SECRET_KEY=your_secret_key_for_jwt_tokens_here
ENABLE_API_AUTH=false

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log to file
LOG_TO_FILE=true
LOG_FILE_PATH=logs/futbot.log

# Log rotation (max file size in MB)
LOG_MAX_SIZE_MB=10

# Keep last N log files
LOG_BACKUP_COUNT=5

# Sentry error tracking (optional)
# Sign up: https://sentry.io/
SENTRY_DSN=your_sentry_dsn_here
ENABLE_SENTRY=false

# Datadog monitoring (optional)
# Sign up: https://www.datadoghq.com/
DATADOG_API_KEY=your_datadog_api_key_here
ENABLE_DATADOG=false

# Prometheus metrics (optional)
ENABLE_PROMETHEUS=false
PROMETHEUS_PORT=9090

# =============================================================================
# DATABASE & PERSISTENCE
# =============================================================================

# SQLite database path (for trade history, state persistence)
DB_PATH=data/futbot.db

# PostgreSQL (optional, for production)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DB=futbot
# POSTGRES_USER=your_postgres_user
# POSTGRES_PASSWORD=your_postgres_password

# Redis (optional, for caching and pub/sub)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=your_redis_password
# ENABLE_REDIS=false

# =============================================================================
# ALERTS & NOTIFICATIONS
# =============================================================================

# Slack notifications (optional)
# Create webhook: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=your_slack_webhook_url_here
ENABLE_SLACK_ALERTS=false

# Discord notifications (optional)
DISCORD_WEBHOOK_URL=your_discord_webhook_url_here
ENABLE_DISCORD_ALERTS=false

# Email alerts (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_email_app_password
ALERT_EMAIL=your_email@gmail.com
ENABLE_EMAIL_ALERTS=false

# Twilio SMS alerts (optional)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_FROM_NUMBER=+1234567890
TWILIO_TO_NUMBER=+1234567890
ENABLE_SMS_ALERTS=false

# =============================================================================
# BACKTESTING
# =============================================================================

# Historical data directory
HISTORICAL_DATA_DIR=data/historical

# Cache directory for downloaded data
DATA_CACHE_DIR=data/cache

# Backtest start date (YYYY-MM-DD)
BACKTEST_START_DATE=2024-01-01

# Backtest end date (YYYY-MM-DD)
BACKTEST_END_DATE=2024-12-31

# =============================================================================
# ADVANCED FEATURES
# =============================================================================

# Paper trading webhook endpoint (for testing order execution)
PAPER_WEBHOOK_URL=

# Custom strategy module path (for loading external strategies)
CUSTOM_STRATEGY_PATH=

# Enable experimental features
ENABLE_EXPERIMENTAL_FEATURES=false

# Debug mode (verbose logging, no real trades)
DEBUG_MODE=false

# Dry run mode (simulate everything, no API calls)
DRY_RUN=false
